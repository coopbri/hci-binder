<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">

    <title>D3 Jargon Sort</title>

    <!-- load D3 -->
    <script src="https://rawcdn.githack.com/coopbri/hci-binder/362464110b5273593e9fdd1dc1c0ae3e4f1da224/lib/d3.min.js"></script>

    <!-- global styles -->
    <style>
      body { font-family: Helvetica; }
      svg  { -moz-user-select: none;
             -webkit-user-select: none;
             -ms-user-select: none;
             user-select: none;
           }
    </style>
  </head>

  <body>
    <script>
      var body = d3.select("body");
      var svg = body.append("svg")
        .attr("width", 550)
        .attr("height", 500);

      // possible terms to be sorted
      var terms = ["Isolating Non-Experts",
                   "Othering",
                   "Confusion",
                   "Excluding People Without Topic Knowledge",
                   "Boredom",
                   "Frustration",
                   "Shutting Down Conversation",
                   "Connection to Broader Literature",
                   "Expressing Complexity Directly",
                   "Connecting to Existing Conversations",
                   "Shortening Extensive Background",
                   "Indicating Subject Knowledge",
                   "Simplifying Complex Ideas",
                   "Signaling Topic Familiarity"];

      // response message
      var msg = body.append("p").text("This is a work in progress! It does not work yet.")
        .style("color", "red");

      var drag = d3.drag()
        .on("start", function () {
          var cur = d3.select(this);
          dx = cur.attr("x") - d3.event.x;
          dy = cur.attr("y") - d3.event.y;
        })
        .on("drag", function() {
          d3.select(this)
            .attr("x", d3.event.x + dx)
            .attr("y", d3.event.y + dy);
        })
        // check solution for current word
        .on("end", function() {
          d3.select(this)
            .attr("x", d3.event.x + dx)
            .attr("y", d3.event.y + dy);

          var x = d3.select(this).attr("x");
          var y = d3.select(this).attr("y");
          var text = d3.select(this).select("text")._groups[0][0].innerHTML;

          // check solution: left bin
          if (x >= -235 && x <= -20 && y <= 300 && y >= 50) {
            checkLeft(text);
          }
          // check solution: right bin
          if (x >= 30 && x <= 230 && y <= 300 && y >= 50) {
            checkRight(text);
          }
        });

      // left bin: benefits/assets
      svg.append("rect")
        .attr("width", 250)
        .attr("height", 250)
        .attr("x", 5)
        .attr("y", 170)
        .attr("fill", "none")
        .attr("stroke", "blue")
        .attr("stroke-width", "4px");

      // right bin: drawbacks/barriers
      svg.append("rect")
        .attr("width", 250)
        .attr("height", 250)
        .attr("x", 270)
        .attr("y", 170)
        .attr("fill", "none")
        .attr("stroke", "red")
        .attr("stroke-width", "4px");

      // draw term from "deck" for placement
      function drawCard() {
        d3.selectAll(".drawn")
          .transition().duration(800)
            .attr("fill-opacity", 0)
            .attr("stroke-opacity", 0)
          .remove();

        // draw random term from selection
        var t = terms[Math.floor(Math.random() * terms.length)];

        // remove selected element from array
        terms = terms.filter(function(item) { return item !== t; });

        // nested SVG for drag translation
        var card = svg.append("svg").classed("card", true);
        card.append("rect")
          .attr("width", 270)
          .attr("height", 50)
          .attr("x", 120)
          .attr("y", 70)
          .attr("fill", "white")
          .attr("stroke", "black")
          .attr("stroke-width", "4px");
        card.append("text")
          .text(t)
          .attr("text-anchor", "middle")
          .attr("x", 260)
          .attr("y", 100);

        // enable dragging of the card
        drag(d3.selectAll(".card"));
      }

      // left bin solution checking
      function checkLeft(e) {
        if (e === "Isolating Non-Experts") {
          msg.text("No, this isn't a benefit or asset of using jargon. Try again!");
        } else if (e === "Othering") {
          msg.text("No, this isn't a benefit or asset of using jargon. Try again!");
        } else if (e === "Confusion") {
          msg.text("No, this isn't a benefit or asset of using jargon. Try again!");
        } else if (e === "Excluding People Without Topic Knowledge") {
          msg.text("No, this isn't a benefit or asset of using jargon. Try again!");
        } else if (e === "Boredom") {
          msg.text("No, this isn't a benefit or asset of using jargon. Try again!");
        } else if (e === "Frustration") {
          msg.text("No, this isn't a benefit or asset of using jargon. Try again!");
        } else if (e === "Shutting Down Conversation") {
          msg.text("No, this isn't a benefit or asset of using jargon. Try again!");
        } else if (e === "Connection to Broader Literature") {
          msg.text("Correct! Jargon allows us to connect to broader and bigger ideas in a domain.");
        } else if (e === "Expressing Complexity Directly") {
          msg.text("Correct! Jargon helps us to represent complex ideas with direct terminology and naming.");
        } else if (e === "Connecting to Existing Conversations") {
          msg.text("Correct! Jargon can connect us to existing conversations by using similar ideas, thoeries, or concepts across ideas.");
        } else if (e === "Shortening Extensive Background") {
          msg.text("Correct! Jargon can shorten the background information we need for a given conversation by quickly stating relevant ideas.");
        } else if (e === "Indicating Subject Knowledge") {
          msg.text("Correct! Jargon can be an indication of knowledge, allowing for representation of domain concepts and ideas.");
        } else if (e === "Simplifying Complex Ideas") {
          msg.text("Correct! Jargon can simplify complex ideas by summarizing conversations, theories, or domains in more direct terms.");
        } else if (e === "Signaling Topic Familiarity") {
          msg.text("Correct! Jargon provides a signal of familiarity for a topic, which could allow a conversation or collaboration to reach more advanced levels.");
        }
      }

      // right bin solution checking
      function checkRight(e) {
        if (e === "Isolating Non-Experts") {
          msg.text("Correct! Isolation can occur often when jargon is used in the wrong context.");
        } else if (e === "Othering") {
          msg.text("Correct! Othering, or making people feel like they don't belong, can occur when jargon is used in the wrong context.");
        } else if (e === "Confusion") {
          msg.text("Correct! Confusion is certainly a possible outcome of using jargon.");
        } else if (e === "Excluding People Without Topic Knowledge") {
          msg.text("Correct! People without expert topic knowledge are certainly excluded from conversations where jargon is used.");
        } else if (e === "Boredom") {
          msg.text("Correct! Boredom can certainly occurr when jargon is overused.");
        } else if (e === "Frustration") {
          msg.text("Correct! Frustration is a natural feeling when jargon is used and someone can't understand the topic at hand.");
        } else if (e === "Shutting Down Conversation") {
          msg.text("Correct! Jargon can shut down a conversation by making participants feel unable to keep up with the terminology.");
        } else if (e === "Connection to Broader Literature") {
          msg.text("No, this isn't a drawback or a barrier in using jargon. Try again!");
        } else if (e === "Expressing Complexity Directly") {
          msg.text("No, this isn't a drawback or a barrier in using jargon. Try again!");
        } else if (e === "Connecting to Existing Conversations") {
          msg.text("No, this isn't a drawback or a barrier in using jargon. Try again!");
        } else if (e === "Shortening Extensive Background") {
          msg.text("No, this isn't a drawback or a barrier in using jargon. Try again!");
        } else if (e === "Indicating Subject Knowledge") {
          msg.text("No, this isn't a drawback or a barrier in using jargon. Try again!");
        } else if (e === "Simplifying Complex Ideas") {
          msg.text("No, this isn't a drawback or a barrier in using jargon. Try again!");
        } else if (e === "Signaling Topic Familiarity") {
          msg.text("No, this isn't a drawback or a barrier in using jargon. Try again!");
        }
      }

      // draw first card
      drawCard();
    </script>
  </body>
</html>
