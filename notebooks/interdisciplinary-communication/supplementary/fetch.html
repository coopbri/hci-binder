<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">

    <title>D3 Fetch</title>

    <!-- load D3 -->
    <script
        src="https://rawcdn.githack.com/coopbri/hci-binder/362464110b5273593e9fdd1dc1c0ae3e4f1da224/lib/d3.min.js"></script>

    <!-- global styles -->
    <style>
        body {
            font-family: Helvetica;
        }

        svg {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>

<body>
    <script>
        var body = d3.select("body");
        var svg = body.append("svg")
            .attr("width", 800)
            .attr("height", 500);

        // execution state of phase two
        var p2 = false;

        // phase one: first stick figure
        function phaseOne() {
            // draw stick figure
            svg.append("rect")
                .transition()
                .attr("fill", "red")
                .attr("x", 60)
                .attr("y", 170)
                .attr("width", 50)
                .attr("height", 50);

            // draw speech bubble
            svg.append("text")
                .append("tspan").text("The general rule here is that the longer the")
                .attr("x", 150)
                .attr("y", 80)
                .append("tspan").text("fetch length – that is, the more fetch within")
                .attr("x", 153)
                .attr("y", 105)
                .append("tspan").text("the overall system – the more sediment")
                .attr("x", 160)
                .attr("y", 130)
                .append("tspan").text("transport will be present")
                .attr("x", 205)
                .attr("y", 155);

            // next button
            svg.append("rect")
                .attr("fill", "orange")
                .attr("width", 80)
                .attr("height", 40)
                .on("click", function() {
                    if (!p2) {
                        phaseTwo();
                }
            });
        }

        // phase two: second stick figure
        function phaseTwo() {
            // set phase two to activated
            p2 = true;

            // draw stick figure
            svg.append("rect")
                .transition()
                .attr("fill", "pink")
                .attr("x", 600)
                .attr("y", 170)
                .attr("width", 50)
                .attr("height", 50);

            // draw speech bubble
            svg.append("text")
                .append("tspan").text("Uh, stop trying to make fetch happen")
                .attr("x", 300)
                .attr("y", 205)
        }
            
        // activate phase one on start
        phaseOne();

        body.append("p").text("Rectangles are placeholders for stick figures.")
    </script>
</body>

</html>